{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Header from \"../../components/header\";\nimport ProductList from \"./ProductList\";\nimport { Input, Icon, Stack, Container, Item } from \"native-base\";\nimport { EvilIcons } from \"@expo/vector-icons\";\nimport SearchedProducts from \"./SearchedProducts\";\nimport Banner from \"../../components/Banner\";\nimport CategoryFilter from \"./categoryFilter\";\nimport axios from 'axios';\nimport baseURL from \"../../../assets/common/baseUrl\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar data = require(\"../../../assets/data/products.json\");\n\nvar ctg = require(\"../../../assets/data/categories.json\");\n\nvar _Dimensions$get = Dimensions.get(\"window\"),\n    height = _Dimensions$get.height;\n\nvar ProductContainer = function ProductContainer(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      products = _useState2[0],\n      setProducts = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      productsFiltered = _useState4[0],\n      setProductsFiltered = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      focus = _useState6[0],\n      setFocus = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      productsCtg = _useState8[0],\n      setProductsCtg = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      categories = _useState10[0],\n      setCategories = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      active = _useState12[0],\n      setActive = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      initialState = _useState14[0],\n      setInitialState = _useState14[1];\n\n  useEffect(function () {\n    axios.get(\"http://localhost:5000/api/products\").then(function (_ref) {\n      var data = _ref.data;\n      setProducts(data.data);\n      setProductsFiltered(data.data);\n      setProductsCtg(data.data);\n      setInitialState(data.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n    axios.get(\"http://localhost:5000/api/category\").then(function (_ref2) {\n      var data = _ref2.data;\n      setCategories(data.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n    setFocus(false);\n    setActive(-1);\n    return function () {\n      setProducts([]);\n      setProductsFiltered([]);\n      setFocus();\n    };\n  }, []);\n\n  var searchProduct = function searchProduct(text) {\n    setProductsFiltered(products.filter(function (i) {\n      return i.name.toLowerCase().includes(text.toLowerCase());\n    }));\n  };\n\n  var openList = function openList() {\n    setFocus(true);\n  };\n\n  var onBLur = function onBLur() {\n    setFocus(false);\n  };\n\n  var changeCtg = function changeCtg(ctg) {\n    {\n      ctg === \"all\" ? [setProductsCtg(initialState), setActive(true)] : [setProductsCtg(products.filter(function (i) {\n        return i.category._id === ctg;\n      }), setActive(true))];\n    }\n  };\n\n  return _jsxs(View, {\n    children: [_jsx(Header, {}), _jsx(View, {\n      style: {\n        marginLeft: 'auto',\n        marginRight: 'auto',\n        margin: 10\n      },\n      children: _jsx(Input, {\n        placeholder: \"Search\",\n        onFocus: openList,\n        onChangeText: function onChangeText(text) {\n          return searchProduct(text);\n        },\n        InputLeftElement: _jsx(Icon, {\n          as: _jsx(EvilIcons, {\n            name: \"search\",\n            size: 24,\n            color: \"black\"\n          }),\n          size: 5,\n          ml: \"2\",\n          color: \"muted.400\"\n        }),\n        InputRightElement: focus && _jsx(Icon, {\n          onPress: onBLur,\n          as: _jsx(EvilIcons, {\n            name: \"close\",\n            size: 24,\n            color: \"black\"\n          }),\n          size: 5,\n          ml: \"2\",\n          color: \"muted.400\"\n        }),\n        w: \"90%\",\n        size: \"xl\",\n        variant: \"rounded\"\n      })\n    }), focus === true ? _jsx(SearchedProducts, {\n      productsFiltered: productsFiltered,\n      navigation: props.navigation\n    }) : _jsx(ScrollView, {\n      style: styles.container,\n      children: _jsxs(View, {\n        children: [_jsx(View, {\n          children: _jsx(Banner, {})\n        }), _jsx(View, {\n          children: _jsx(CategoryFilter, {\n            categories: categories,\n            categoryFilter: changeCtg,\n            productsCtg: productsCtg,\n            active: active,\n            setActive: setActive\n          })\n        }), _jsx(View, {\n          children: productsCtg.length > 0 ? _jsx(View, {\n            style: styles.listContainer,\n            children: productsCtg.map(function (item) {\n              return _jsx(ProductList, {\n                item: item,\n                navigation: props.navigation\n              }, item.name);\n            })\n          }) : _jsx(View, {\n            style: [styles.center, {\n              height: height / 2\n            }],\n            children: _jsx(Text, {\n              children: \"No products found\"\n            })\n          })\n        })]\n      })\n    })]\n  });\n};\n\nvar styles = StyleSheet.create({\n  center: {\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  listContainer: {\n    height: height,\n    flex: 1,\n    flexDirection: \"row\",\n    alignItems: \"flex-start\",\n    flexWrap: \"wrap\",\n    backgroundColor: \"gainsboro\"\n  },\n  container: {\n    flexWrap: \"wrap\",\n    backgroundColor: \"gainsboro\"\n  }\n});\nexport default ProductContainer;","map":{"version":3,"names":["React","useState","useEffect","Header","ProductList","Input","Icon","Stack","Container","Item","EvilIcons","SearchedProducts","Banner","CategoryFilter","axios","baseURL","data","require","ctg","Dimensions","get","height","ProductContainer","props","products","setProducts","productsFiltered","setProductsFiltered","focus","setFocus","productsCtg","setProductsCtg","categories","setCategories","active","setActive","initialState","setInitialState","then","catch","error","console","log","searchProduct","text","filter","i","name","toLowerCase","includes","openList","onBLur","changeCtg","category","_id","marginLeft","marginRight","margin","navigation","styles","container","length","listContainer","map","item","center","StyleSheet","create","justifyContent","alignItems","flex","flexDirection","flexWrap","backgroundColor"],"sources":["/Users/user/Documents/fullstack-mobile/client/app/screens/Products/ProductContainer.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Text,\n  View,\n  StyleSheet,\n  SafeAreaView,\n  FlatList,\n  ScrollView,\n  Dimensions,\n} from \"react-native\";\nimport Header from \"../../components/header\";\nimport ProductList from \"./ProductList\";\nimport { Input, Icon, Stack, Container, Item } from \"native-base\";\nimport { EvilIcons } from \"@expo/vector-icons\";\nimport SearchedProducts from \"./SearchedProducts\";\nimport Banner from \"../../components/Banner\";\nimport CategoryFilter from \"./categoryFilter\";\nimport axios from 'axios';\nimport baseURL from \"../../../assets/common/baseUrl\";\nconst data = require(\"../../../assets/data/products.json\");\nconst ctg = require(\"../../../assets/data/categories.json\");\nvar { height } = Dimensions.get(\"window\");\n\nconst ProductContainer = (props) => {\n  const [products, setProducts] = useState([]);\n  const [productsFiltered, setProductsFiltered] = useState([]);\n  const [focus, setFocus] = useState();\n  const [productsCtg, setProductsCtg] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [active, setActive] = useState();\n  const [initialState, setInitialState] = useState([]);\n\n  useEffect(() => {\n  \n  axios\n  .get(`http://localhost:5000/api/products`)\n  .then(({data}) => {\n    setProducts(data.data);\n    setProductsFiltered(data.data);\n    setProductsCtg(data.data);\n    setInitialState(data.data);\n  })\n  .catch((error) => {\n    console.log(error)\n  })\n\n  axios\n  .get(`http://localhost:5000/api/category`)\n  .then(({data}) => {\n    setCategories(data.data)\n  })\n  .catch((error) => {\n    console.log(error)\n  })\n\n    setFocus(false);\n    setActive(-1);\n    return () => {\n      setProducts([]);\n      setProductsFiltered([]);\n      setFocus();\n    };\n\n   \n  }, []);\n\n\n  const searchProduct = (text) => {\n    setProductsFiltered(\n      products.filter((i) => i.name.toLowerCase().includes(text.toLowerCase()))\n    );\n  };\n  const openList = () => {\n    setFocus(true);\n  };\n\n  const onBLur = () => {\n    setFocus(false);\n  };\n\n  // ctg\n  // Categories\n  const changeCtg = (ctg) => {\n    {\n      ctg === \"all\"\n        ? [setProductsCtg(initialState), setActive(true)]\n        : [\n            setProductsCtg(\n              products.filter((i) => i.category._id === ctg),\n              setActive(true)\n            ),\n          ];\n    }\n  };\n\n  return (\n    <View>\n       <Header />\n    <View style={{marginLeft: 'auto', marginRight: 'auto', margin: 10}}>\n      <Input\n        placeholder=\"Search\"\n        onFocus={openList}\n        onChangeText={(text) => searchProduct(text)}\n        InputLeftElement={\n          <Icon\n            as={<EvilIcons name=\"search\" size={24} color=\"black\" />}\n            size={5}\n            ml=\"2\"\n            color=\"muted.400\"\n          />\n        }\n        InputRightElement={\n          focus && (\n            <Icon\n              onPress={onBLur}\n              as={<EvilIcons name=\"close\" size={24} color=\"black\" />}\n              size={5}\n              ml=\"2\"\n              color=\"muted.400\"\n            />\n          )\n        }\n        w=\"90%\"\n        size=\"xl\"\n        variant=\"rounded\"\n      />\n      </View>\n      {focus === true ? (\n          <SearchedProducts\n            productsFiltered={productsFiltered}\n            navigation={props.navigation}\n          />\n      ) : (\n        <ScrollView style={styles.container}>\n          <View>\n            <View>\n              <Banner />\n            </View>\n            <View>\n              <CategoryFilter\n                categories={categories}\n                categoryFilter={changeCtg}\n                productsCtg={productsCtg}\n                active={active}\n                setActive={setActive}\n              />\n            </View>\n            <View>\n              {productsCtg.length > 0 ? (\n                <View style={styles.listContainer}>\n                  {productsCtg.map((item) => {\n                    return (\n                      <ProductList\n                        key={item.name}\n                        item={item}\n                        navigation={props.navigation}\n                      />\n                    );\n                  })}\n                </View>\n              ) : (\n                <View style={[styles.center, { height: height / 2 }]}>\n                  <Text>No products found</Text>\n                </View>\n              )}\n            </View>\n          </View>\n        </ScrollView>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  center: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  listContainer: {\n    height: height,\n    flex: 1,\n    flexDirection: \"row\",\n    alignItems: \"flex-start\",\n    flexWrap: \"wrap\",\n    backgroundColor: \"gainsboro\",\n  },\n  container: {\n    flexWrap: \"wrap\",\n    backgroundColor: \"gainsboro\",\n  },\n});\n\nexport default ProductContainer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}